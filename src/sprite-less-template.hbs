// IS THIS WORKING
//$CONTENT
{{#each layouts}}
////${{escimage name}}
{{/each}}
//-------------------



{{#each layouts}}
////${{escimage name}}
//-------------------

  {{#each layout.items}}
@{{cssesc ../classname}}-{{#if ../../opt.split}}{{escimage ../../name}}-{{/if}}{{escimage meta.name}}: -{{baseDim x}}px -{{baseDim y}}px {{baseDim width}}px {{baseDim height}}px;
  {{/each}}

.sgx-sprite-{{escimage name}}(@sprite){
    .sgx-sprite-position(@sprite);
    .sgx-sprite-width(@sprite);
    .sgx-sprite-height(@sprite);
    background-repeat: no-repeat;
    {{#each sprites}}
        {{#if dpi}}

        @media
        only screen and (-webkit-min-device-pixel-ratio: {{ratio}}),
        only screen and (   min--moz-device-pixel-ratio: {{ratio}}),
        only screen and (     -o-min-device-pixel-ratio: {{ratio}}/1),
        only screen and (        min-device-pixel-ratio: {{ratio}}),
        only screen and (                min-resolution: {{dpi}}dpi),
        only screen and (                min-resolution: {{ratio}}dppx){
            background-size: {{baseWidth}}px {{baseHeight}}px;
            background-image: url('{{escimage url}}');
        }
        {{else}}
    background-image: url('{{escimage url}}');
        {{/if}}
    {{/each}}
}
{{/each}}

//$UTILITIES
//-------------------

.sgx-sprite-width(@sprite) {
    width: extract(@sprite, 3);
}

.sgx-sprite-height(@sprite) {
    height: extract(@sprite, 4);
}

.sgx-sprite-position(@sprite) {
    @sprite-offset-x: extract(@sprite, 1);
    @sprite-offset-y: extract(@sprite, 2);
    background-position: @sprite-offset-x  @sprite-offset-y;
}
